<div class="registro-container">
  
  <!-- HEADER -->
  <div class="registro-header">
    <button class="btn-voltar" (click)="voltar()">‚Üê Voltar</button>
    <div class="header-content">
      <h1>üïê Registrar Atraso</h1>
      <p class="subtitle">Registre alunos que chegaram atrasados</p>
    </div>
  </div>

  <!-- FORMUL√ÅRIO -->
  <div class="form-container" *ngIf="!loading">
    <form [formGroup]="atrasoForm">
      
      <!-- Dados do Aluno -->
      <div class="form-section">
        <h3 class="section-title">Dados do Aluno</h3>
        
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="alunoNome">Nome do Aluno *</label>
            <input 
              type="text" 
              id="alunoNome" 
              formControlName="alunoNome"
              placeholder="Digite o nome completo"
              required>
          </div>
          
          <div class="form-group">
            <label for="turma">Turma *</label>
            <input 
              type="text" 
              id="turma" 
              formControlName="turma"
              placeholder="Ex: 5¬∫ A, 7¬∫ B, 1¬∫ EM"
              required>
          </div>
          
          <div class="form-group">
            <label for="tipoEnsino">Tipo de Ensino *</label>
            <select id="tipoEnsino" formControlName="tipoEnsino" required>
              <option value="">Selecione</option>
              <option *ngFor="let tipo of tiposEnsino" [value]="tipo">{{ tipo }}</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Informa√ß√µes do Atraso -->
      <div class="form-section">
        <h3 class="section-title">Informa√ß√µes do Atraso</h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="data">Data *</label>
            <input 
              type="date" 
              id="data" 
              formControlName="data"
              required>
          </div>
          
          <div class="form-group">
            <label for="horario">Hor√°rio de Chegada *</label>
            <input 
              type="time" 
              id="horario" 
              formControlName="horario"
              required>
          </div>
          
          <div class="form-group">
            <label for="aulaPermitida">Aula Permitida *</label>
            <select id="aulaPermitida" formControlName="aulaPermitida" required>
              <option *ngFor="let aula of aulasPermitidas" [value]="aula">{{ aula }}</option>
            </select>
          </div>
          
          <div class="form-group full-width">
            <label for="motivo">Motivo (Opcional)</label>
            <textarea 
              id="motivo" 
              formControlName="motivo"
              rows="3"
              placeholder="Descreva o motivo do atraso, se informado..."></textarea>
          </div>
        </div>
      </div>

      <!-- Bot√£o de Enviar -->
      <div class="form-actions">
        <button 
          type="button" 
          class="btn-enviar" 
          (click)="confirmar()"
          [disabled]="!atrasoForm.valid">
          Registrar Atraso
        </button>
      </div>
      
    </form>
  </div>

  <!-- LOADING STATE -->
  <div class="loading-container" *ngIf="loading">
    <div class="spinner"></div>
    <p>Registrando atraso...</p>
  </div>

  <!-- MODAL DE CONFIRMA√á√ÉO -->
  <div class="modal-overlay" *ngIf="showConfirm" (click)="cancelarConfirmacao()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>Confirmar Registro de Atraso</h3>
      
      <div class="confirmacao-info">
        <p><strong>Aluno:</strong> {{ atrasoForm.value.alunoNome }}</p>
        <p><strong>Turma:</strong> {{ atrasoForm.value.turma }}</p>
        <p><strong>Hor√°rio:</strong> {{ atrasoForm.value.horario }}</p>
        <p><strong>Permitido a partir da:</strong> {{ atrasoForm.value.aulaPermitida }}</p>
      </div>
      
      <div class="modal-buttons">
        <button class="btn-cancelar" (click)="cancelarConfirmacao()">Cancelar</button>
        <button class="btn-confirmar" (click)="confirmarRegistro()">Confirmar</button>
      </div>
    </div>
  </div>

</div>
