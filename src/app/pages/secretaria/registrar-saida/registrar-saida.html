<div class="registro-container">
  
  <!-- HEADER -->
  <div class="registro-header">
    <button class="btn-voltar" (click)="voltar()">‚Üê Voltar</button>
    <div class="header-content">
      <h1>üö™ Registrar Sa√≠da Antecipada</h1>
      <p class="subtitle">Registre alunos que precisam sair antes do t√©rmino das aulas</p>
    </div>
  </div>

  <!-- FORMUL√ÅRIO -->
  <div class="form-container" *ngIf="!loading">
    <form [formGroup]="saidaForm">
      
      <!-- Dados do Aluno -->
      <div class="form-section">
        <h3 class="section-title">Dados do Aluno</h3>
        
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="alunoNome">Nome do Aluno *</label>
            <input 
              type="text" 
              id="alunoNome" 
              formControlName="alunoNome"
              placeholder="Digite o nome completo"
              required>
          </div>
          
          <div class="form-group">
            <label for="tipoEnsino">Tipo de Ensino *</label>
            <select 
              id="tipoEnsino" 
              formControlName="tipoEnsino"
              (change)="onTipoEnsinoChange($any($event.target).value)"
              required>
              <option value="">Selecione</option>
              <option *ngFor="let tipo of tiposEnsino" [value]="tipo">{{ tipo }}</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="turma">Turma *</label>
            <select 
              id="turma" 
              formControlName="turma"
              [disabled]="turmasFiltradas.length === 0"
              required>
              <option value="">
                {{ turmasFiltradas.length === 0 ? 'Selecione' : 'Selecione a turma' }}
              </option>
              <option *ngFor="let turma of turmasFiltradas" [value]="turma">
                {{ turma }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <!-- Informa√ß√µes da Sa√≠da -->
      <div class="form-section">
        <h3 class="section-title">Informa√ß√µes da Sa√≠da</h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="data">Data *</label>
            <input 
              type="date" 
              id="data" 
              formControlName="data"
              required>
          </div>
          
          <div class="form-group">
            <label for="horario">Hor√°rio de Sa√≠da *</label>
            <input 
              type="time" 
              id="horario" 
              formControlName="horario"
              required>
          </div>
          
          <div class="form-group full-width">
            <label for="motivo">Motivo da Sa√≠da *</label>
            <textarea 
              id="motivo" 
              formControlName="motivo"
              rows="3"
              placeholder="Descreva o motivo da sa√≠da antecipada..."
              required></textarea>
          </div>
        </div>
      </div>

      <!-- Dados do Respons√°vel -->
      <div class="form-section">
        <h3 class="section-title">Dados do Respons√°vel</h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label for="responsavel">Nome do Respons√°vel *</label>
            <input 
              type="text" 
              id="responsavel" 
              formControlName="responsavel"
              placeholder="Nome completo"
              required>
          </div>
          
          <div class="form-group">
            <label for="telefoneResponsavel">Telefone do Respons√°vel</label>
            <input 
              type="tel" 
              id="telefoneResponsavel" 
              formControlName="telefoneResponsavel"
              placeholder="(00) 00000-0000">
          </div>
        </div>
      </div>

      <!-- Bot√£o de Enviar -->
      <div class="form-actions">
        <button 
          type="button" 
          class="btn-enviar" 
          (click)="confirmar()"
          [disabled]="!saidaForm.valid">
          Registrar Sa√≠da
        </button>
      </div>
      
    </form>
  </div>

  <!-- LOADING STATE -->
  <div class="loading-container" *ngIf="loading">
    <div class="spinner"></div>
    <p>Registrando sa√≠da...</p>
  </div>

  <!-- MODAL DE CONFIRMA√á√ÉO -->
  <div class="modal-overlay" *ngIf="showConfirm" (click)="cancelarConfirmacao()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <h3>Confirmar Registro de Sa√≠da</h3>
      
      <div class="confirmacao-info">
        <h4>Aluno</h4>
        <p><strong>Nome:</strong> {{ saidaForm.value.alunoNome }}</p>
        <p><strong>Turma:</strong> {{ saidaForm.value.turma }}</p>
        
        <h4>Sa√≠da</h4>
        <p><strong>Hor√°rio:</strong> {{ saidaForm.value.horario }}</p>
        <p><strong>Motivo:</strong> {{ saidaForm.value.motivo }}</p>
        
        <h4>Respons√°vel</h4>
        <p><strong>Nome:</strong> {{ saidaForm.value.responsavel }}</p>
        <p *ngIf="saidaForm.value.telefoneResponsavel"><strong>Telefone:</strong> {{ saidaForm.value.telefoneResponsavel }}</p>
      </div>
      
      <div class="modal-buttons">
        <button class="btn-cancelar" (click)="cancelarConfirmacao()">Cancelar</button>
        <button class="btn-confirmar" (click)="confirmarRegistro()">Confirmar</button>
      </div>
    </div>
  </div>

</div>
